!function(e){"use strict";function t(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",a=0;a<5;a++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}e("body").on("click","#add_multiple_question",function(a){a.preventDefault();var n=e(this).attr("data-quiz-id"),i=e(".multipleQuestionModal"+n).clone(),r="correctAnswerSwitch"+t();i.find("label.js-switch").attr("for",r),i.find("input.js-switch").attr("id",r);var o=t();i.find(".main-answer-row").removeClass("main-answer-row").addClass("main-answer-box");var s=i.prop("innerHTML");s=(s=s.replaceAll("record",o)).replaceAll("ans_tmp","ans_temp"),i.html(s),Swal.fire({html:i.html(),showCancelButton:!1,showConfirmButton:!1,customClass:{content:"p-0 text-left"},width:"48rem"})}),e("body").on("click",".add-answer-btn",function(a){a.preventDefault();var n=e(".add-answer-container .main-answer-box"),i=n.clone();i.removeClass("main-answer-box"),i.find(".answer-remove").removeClass("d-none");var r="correctAnswerSwitch"+t();i.find("label.js-switch").attr("for",r),i.find("input.js-switch").attr("id",r),i.find('input[type="checkbox"]').prop("checked",!1);var o=i.prop("innerHTML"),s=t();o=(o=o.replaceAll("ans_temp",s)).replace(/\[\d+\]/g,"["+s+"]"),i.html(o),i.find('input[type="checkbox"]').prop("checked",!1),i.find('input[type="text"]').val(""),n.parent().append(i)}),e("body").on("click",".answer-remove",function(t){t.preventDefault(),e(this).closest(".add-answer-card").remove()}),e("body").on("click","#add_descriptive_question",function(a){a.preventDefault();var n=e(this).attr("data-quiz-id"),i=e(".descriptiveQuestionModal"+n).clone(),r=t(),o=i.prop("innerHTML");o=(o=o.replaceAll("record",r)).replaceAll("ans_tmp","ans_temp"),i.html(o),Swal.fire({html:i.html(),showCancelButton:!1,showConfirmButton:!1,customClass:{content:"p-0 text-left"},width:"48rem"})}),e("body").on("change",".js-switch",function(){var t=e(this);t.closest(".js-switch-parent");this.checked&&(e(".js-switch").each(function(){e(this).closest(".js-switch-parent").find('input[type="checkbox"]').prop("checked",!1)}),t.prop("checked",!0))}),e("body").on("click",".save-question",function(t){t.preventDefault();var a=e(this),n=a.closest(".quiz-questions-form"),i=serializeObjectByTag(n),r=n.attr("data-action");a.addClass("loadingbar primary").prop("disabled",!0),n.find("input").removeClass("is-invalid"),n.find("textarea").removeClass("is-invalid"),e.post(r,i,function(e){e&&200===e.code&&(Swal.fire({icon:"success",html:'<h3 class="font-20 text-center text-dark-blue py-25">'+saveSuccessLang+"</h3>",showConfirmButton:!1,width:"25rem"}),setTimeout(function(){window.location.reload()},500))}).fail(function(e){a.removeClass("loadingbar primary").prop("disabled",!1);var t=e.responseJSON;t&&t.errors&&Object.keys(t.errors).forEach(function(e){var a=t.errors[e],i=n.find(".js-ajax-"+e);i.addClass("is-invalid"),i.parent().find(".invalid-feedback").text(a[0])})})}),e("body").on("click",".edit_question",function(a){a.preventDefault();var n=e(this).attr("data-question-id");loadingSwl(),e.get("/panel/quizzes-questions/"+n+"/edit",function(a){if(a&&a.html){var n='<div id="editQuestion">'+a.html+"</div>";Swal.fire({html:n,showCancelButton:!1,showConfirmButton:!1,customClass:{content:"p-0 text-left"},width:"48rem",onOpen:function(){var a=e("#editQuestion");a.find(".main-answer-row").removeClass("main-answer-row").addClass("main-answer-box");var n=t();a.find(".panel-file-manager").first().attr("data-input",n),a.find(".lfm-input").first().attr("id",n);var i="correctAnswerSwitch"+t();a.find("label.js-switch").first().attr("for",i),a.find("input.js-switch").first().attr("id",i),feather.replace()}})}})}),e("body").on("click",".js-submit-quiz-form",function(t){t.preventDefault();var a=e(this),n=a.closest(".quiz-form"),i=serializeObjectByTag(n),r=n.attr("data-action");a.addClass("loadingbar primary").prop("disabled",!0),n.find("input").removeClass("is-invalid"),n.find("textarea").removeClass("is-invalid"),e.post(r,i,function(e){e&&200===e.code&&(Swal.fire({icon:"success",html:'<h3 class="font-20 text-center text-dark-blue">'+saveSuccessLang+"</h3>",showConfirmButton:!1}),setTimeout(function(){e.redirect_url&&""!==e.redirect_url?window.location.href=e.redirect_url:window.location.reload()},2e3))}).fail(function(e){a.removeClass("loadingbar primary").prop("disabled",!1);var t=e.responseJSON;t&&t.errors&&Object.keys(t.errors).forEach(function(e){var a=t.errors[e],i=n.find(".js-ajax-"+e);i.addClass("is-invalid"),i.parent().find(".invalid-feedback").text(a[0])})})}),e("body").on("change",".js-ajax-webinar_id",function(t){var a="/panel/chapters/getAllByWebinarId/"+e(this).val(),n=e(".js-ajax-chapter_id");n.addClass("loadingbar gray"),e.get(a,function(e){if(e&&e.chapters){var t='<option value="">'+quizzesSectionLang+"</option>";Object.keys(e.chapters).forEach(function(a){var n=e.chapters[a];t+='<option value="'+n.id+'">'+n.title+"</option>"}),n.removeClass("loadingbar gray"),n.html(t)}})})}(jQuery);
