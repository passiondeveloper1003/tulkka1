!function(e){"use strict";e("body").on("click",".js-webinar-next-session",function(a){a.preventDefault();var n=e(this).attr("data-webinar-id");loadingSwl(),e.get("/panel/webinars/"+n+"/getNextSessionInfo",function(a){if(a&&200===a.code){var n=a.session,s=e("#webinarNextSessionModal").clone();s=s.prop("innerHTML"),null!==n&&(s=s.replace(/\[new\]/g,"["+n.id+"]"));var i='<div id="webinarNextSessionHtml">'+s+"</div>";Swal.fire({html:i,showCancelButton:!1,showConfirmButton:!1,customClass:{content:"p-0 text-left"},width:"48rem",onOpen:function(){var s=e("#webinarNextSessionHtml"),i="new";null!==n&&(s.find("form").attr("action","/panel/sessions/"+n.id+"/update"),Object.keys(n).forEach(function(e){s.find('[name="ajax['+n.id+"]["+e+']"]').val(n[e])}),s.find('[name="ajax['+n.id+'][status]"]').val("active"===n.status?"on":null),n.agora_settings&&(s.find('[name="ajax['+n.id+'][agora_chat]"]').val(n.agora_settings.chat?"on":null),s.find('[name="ajax['+n.id+'][agora_rec]"]').val(n.agora_settings.record?"on":null)),i=n.id),s.find('[name="ajax['+i+'][webinar_id]"]').val(a.webinar_id),n&&"local"!==n.session_api&&(s.find('[name="ajax['+n.id+'][session_api]"]').prop("disabled",!0),s.find('[name="ajax['+n.id+'][api_secret]"]').prop("disabled",!0),s.find('[name="ajax['+n.id+'][link]"]').prop("disabled",!0),s.find('[name="ajax['+n.id+'][date]"]').prop("disabled",!0),s.find('[name="ajax['+n.id+'][duration]"]').prop("disabled",!0)),n&&"big_blue_button"===n.session_api?(s.find(".js-moderator-secret").removeClass("d-none"),s.find('[name="ajax['+n.id+'][moderator_secret]"]').prop("disabled",!0)):s.find(".js-moderator-secret").addClass("d-none"),!n||"zoom"!==n.session_api&&"agora"!==n.session_api||s.find(".js-api-secret").addClass("d-none");var o=s.find(".js-ajax-chapter_id");if(a&&a.chapters){var t='<option value="">'+selectChapterLang+"</option>";Object.keys(a.chapters).forEach(function(e){var n=a.chapters[e];t+='<option value="'+n.id+'">'+n.title+"</option>"}),o.html(t)}resetDatePickers()}})}}).fail(function(e){Swal.fire({icon:"error",html:'<h3 class="font-20 text-center text-dark-blue">'+undefinedActiveSessionLang+"</h3>",showConfirmButton:!1})})}),e("body").on("click",".js-save-next-session",function(a){a.preventDefault();var n=e(this),s=n.closest("form"),i=serializeObjectByTag(s),o=s.attr("action");n.addClass("loadingbar primary").prop("disabled",!0),s.find("input").removeClass("is-invalid"),s.find("textarea").removeClass("is-invalid"),e.post(o,i,function(e){e&&200===e.code&&(Swal.fire({icon:"success",html:'<h3 class="font-20 text-center text-dark-blue py-25">'+saveSuccessLang+"</h3>",showConfirmButton:!1,width:"25rem"}),setTimeout(function(){window.location.reload()},500))}).fail(function(e){n.removeClass("loadingbar primary").prop("disabled",!1);var a=e.responseJSON;a&&a.errors&&Object.keys(a.errors).forEach(function(e){var n=a.errors[e],i=s.find(".js-ajax-"+e);i.addClass("is-invalid"),i.parent().find(".invalid-feedback").text(n[0])})})}),e("body").on("change",".js-ajax-session_api",function(a){a.preventDefault();var n=e(this).closest("form"),s=this.value;"big_blue_button"===s?(n.find(".js-local-link").addClass("d-none"),n.find(".js-api-secret").removeClass("d-none"),n.find(".js-moderator-secret").removeClass("d-none")):"zoom"===s?(n.find(".js-local-link").addClass("d-none"),n.find(".js-api-secret").addClass("d-none"),n.find(".js-moderator-secret").addClass("d-none")):"agora"===s?(n.find(".js-local-link").addClass("d-none"),n.find(".js-api-secret").addClass("d-none"),n.find(".js-moderator-secret").addClass("d-none")):(n.find(".js-local-link").removeClass("d-none"),n.find(".js-api-secret").removeClass("d-none"),n.find(".js-moderator-secret").addClass("d-none"))}),e("body").on("change","#conductedSwitch",function(a){a.preventDefault(),e(this).closest("form").trigger("submit")}),e("body").on("change","#freeClassesSwitch",function(a){a.preventDefault(),e(this).closest("form").trigger("submit")})}(jQuery);
