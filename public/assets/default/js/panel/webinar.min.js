function _createForOfIteratorHelper(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}!function(e){"use strict";function t(e,t){var n=null;return Object.keys(e).length&&(Object.keys(e).forEach(function(a){var r=e[a];r.locale===t&&(n=r.title)}),n||(n=e[0].title)),n}function n(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",n=0;n<5;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}function a(e,t,n){var a={width:20,height:20},r=feather.icons.upload.toSvg(a),o=e.find(".js-file-type-volume"),i=e.find(".js-file-volume-field"),s=e.find(".js-downloadable-input"),l=e.find(".js-online_viewer-input"),c=e.find(".js-file-path-input"),d=e.find(".js-s3-file-path-input"),p=e.find(".js-file-path-input button"),f=e.find(".js-file-path-input input");switch(p.addClass("panel-file-manager"),c.removeClass("d-none"),d.addClass("d-none"),t){case"youtube":case"vimeo":case"iframe":o.addClass("d-none"),s.find("input").prop("checked",!1),s.addClass("d-none"),l.find("input").prop("checked",!1),l.addClass("d-none"),r=feather.icons.link.toSvg(a),p.removeClass("panel-file-manager");break;case"external_link":case"s3":o.removeClass("d-none"),n&&"video"===n?s.removeClass("d-none"):(s.find("input").prop("checked",!1),s.addClass("d-none")),"external_link"===t?(r=feather.icons["external-link"].toSvg(a),p.removeClass("panel-file-manager")):"s3"===t&&(c.addClass("d-none"),d.removeClass("d-none")),n&&"pdf"===n?l.removeClass("d-none"):(l.find("input").prop("checked",!1),l.addClass("d-none"));break;case"google_drive":o.removeClass("d-none"),s.find("input").prop("checked",!1),s.addClass("d-none"),n&&"pdf"===n?l.removeClass("d-none"):(l.find("input").prop("checked",!1),l.addClass("d-none")),r=feather.icons.box.toSvg(a),p.removeClass("panel-file-manager");break;case"upload":o.removeClass("d-none"),i.addClass("d-none"),s.removeClass("d-none"),n&&"pdf"===n?l.removeClass("d-none"):(l.find("input").prop("checked",!1),l.addClass("d-none"))}r&&p.html(r),filePathPlaceHolderBySource&&f.attr("placeholder",filePathPlaceHolderBySource[t])}e("#summernote").length&&e("#summernote").summernote({tabsize:2,height:400,placeholder:e("#summernote").attr("placeholder"),dialogsInBody:!0,toolbar:[["style",["style"]],["font",["bold","underline","clear"]],["fontname",["fontname"]],["color",["color"]],["para",["paragraph"]],["table",["table"]],["insert",["link","picture","video"]],["view",["fullscreen","codeview","help"]]]}),e("body").on("click","#sendForReview",function(t){e(this).addClass("loadingbar primary").prop("disabled",!0),t.preventDefault(),e("#forDraft").val(0),e("#webinarForm").trigger("submit")}),e("body").on("click","#saveAsDraft",function(t){e(this).addClass("loadingbar primary").prop("disabled",!0),t.preventDefault(),e("#forDraft").val(1),e("#webinarForm").trigger("submit")}),e("body").on("click","#getNextStep",function(t){e(this).addClass("loadingbar primary").prop("disabled",!0),t.preventDefault(),e("#forDraft").val(1),e("#getNext").val(1),e("#webinarForm").trigger("submit")}),e("body").on("click",".js-get-next-step",function(t){if(t.preventDefault(),!e(this).hasClass("active")){e(this).addClass("loadingbar primary").prop("disabled",!0);var n=e(this).attr("data-step");e("#getStep").val(n),e("#forDraft").val(1),e("#getNext").val(1),e("#webinarForm").trigger("submit")}}),e("#partnerInstructorSwitch").on("change.bootstrapSwitch",function(t){t.target.checked?e("#partnerInstructorInput").removeClass("d-none"):e("#partnerInstructorInput").addClass("d-none")}),e("body").on("change","#categories",function(n){n.preventDefault();var a=this.value;e.get("/panel/filters/get-by-category-id/"+a,function(n){if(n&&void 0!==n.filters&&n.filters.length){var a=n.defaultLocale,r="";Object.keys(n.filters).forEach(function(e){var o=n.filters[e],i=[];o.options.length&&(i=o.options);var s=o.title;!s&&o.translations&&(s=t(o.translations,a)),r+='<div class="col-12 col-md-3">\n<div class="webinar-category-filters">\n<strong class="category-filter-title d-block">'+s+'</strong>\n<div class="py-10"></div>\n\n',i.length&&Object.keys(i).forEach(function(e){var n=i[e],o=n.title;!o&&n.translations&&(o=t(n.translations,a)),r+='<div class="form-group mt-20 d-flex align-items-center justify-content-between">\n<label class="cursor-pointer" for="filterOption'+n.id+'">'+o+'</label>\n<div class="custom-control custom-checkbox">\n<input type="checkbox" name="filters[]" value="'+n.id+'" class="custom-control-input" id="filterOption'+n.id+'">\n<label class="custom-control-label" for="filterOption'+n.id+'"></label>\n</div>\n</div>\n'}),r+="</div></div>"}),e("#categoriesFiltersContainer").removeClass("d-none"),e("#categoriesFiltersCard").html(r)}else e("#categoriesFiltersContainer").addClass("d-none"),e("#categoriesFiltersCard").html("")})}),e("body").on("click",".cancel-accordion",function(t){t.preventDefault(),e(this).closest(".accordion-row").remove()}),window.handleWebinarItemForm=function(t,n){var a=serializeObjectByTag(t),r=t.attr("data-action");n.addClass("loadingbar primary").prop("disabled",!0),t.find("input").removeClass("is-invalid"),t.find("textarea").removeClass("is-invalid"),e.post(r,a,function(e){e&&200===e.code&&(Swal.fire({icon:"success",html:'<h3 class="font-20 text-center text-dark-blue py-25">'+saveSuccessLang+"</h3>",showConfirmButton:!1,width:"25rem"}),setTimeout(function(){window.location.reload()},500))}).fail(function(e){n.removeClass("loadingbar primary").prop("disabled",!1);var a=e.responseJSON;a&&"zoom_jwt_token_invalid"===a.status&&Swal.fire({icon:"error",html:'<h3 class="font-20 text-center text-dark-blue py-25">'+zoomJwtTokenInvalid+"</h3>",showConfirmButton:!1,width:"25rem"}),a&&a.errors&&Object.keys(a.errors).forEach(function(e){var n=a.errors[e],r=t.find(".js-ajax-"+e);"zoom-not-complete-alert"===e?t.find(".js-zoom-not-complete-alert").removeClass("d-none"):(r.addClass("is-invalid"),r.parent().find(".invalid-feedback").text(n[0]))})})},e("body").on("click","#webinarAddTicket",function(t){t.preventDefault();var a=n(),r=e("#newTicketForm").html();r=r.replaceAll("record",a),e("#ticketsAccordion").prepend(r),resetDatePickers(),feather.replace()}),e("body").on("click",".js-save-ticket",function(t){t.preventDefault();var n=e(this),a=n.closest(".ticket-form");handleWebinarItemForm(a,n)}),e("body").on("click",".save-chapter",function(t){t.preventDefault();var n=e(this),a=n.closest(".chapter-form");handleWebinarItemForm(a,n)}),e("body").on("click",".js-add-chapter",function(t){var a=e(this),r=a.attr("data-webinar-id"),o=a.attr("data-type"),i=a.attr("data-chapter"),s=a.attr("data-locale"),l=i||n(),c=e("#chapterModalHtml").clone();c.removeClass("d-none");var d=c.prop("innerHTML");d=d.replaceAll("record",l),c.html('<div id="chapterModal'+l+'">'+d+"</div>"),Swal.fire({html:c,showCancelButton:!1,showConfirmButton:!1,customClass:{content:"p-0 text-left"},width:"36rem",onOpen:function(){var t=e("#chapterModal"+l);if(t.find("input.js-chapter-webinar-id").val(r),t.find("input.js-chapter-type").val(o),i){t.find(".section-title").text(editChapterLang);var n="/panel/chapters/"+i+"/update";t.find(".chapter-form").attr("data-action",n),e.get("/panel/chapters/"+i+"?locale="+s,function(e){if(e&&e.chapter){t.find(".js-ajax-title").val(e.chapter.title);var n=t.find(".js-chapter-status-switch");"active"===e.chapter.status?n.prop("checked",!0):n.prop("checked",!1);var a=e.chapter.check_all_contents_pass&&"0"!==e.chapter.check_all_contents_pass;t.find(".js-chapter-check-all-contents-pass").prop("checked",a);var r=t.find(".js-chapter-locale");r.val(s),r.addClass("js-webinar-content-locale"),r.attr("data-id",i)}})}}})}),e("body").on("click",".js-add-course-content-btn, .add-new-interactive-file-btn",function(t){t.preventDefault();var a=e(this),r=a.attr("data-type"),o=a.attr("data-chapter"),i="#chapterContentAccordion"+o,s=n(),l="";switch(r){case"file":var c=e("#newFileForm");c.find(".chapter-input").val(o),l=(l=c.html()).replace(/record/g,s),e(i).prepend(l);break;case"new_interactive_file":var d=e("#newInteractiveFileForm");d.find(".chapter-input").val(o),l=(l=d.html()).replace(/record/g,s),e(i).prepend(l);break;case"session":var p=e("#newSessionForm");p.find(".chapter-input").val(o),l=(l=p.html()).replace(/record/g,s),e(i).prepend(l);break;case"text_lesson":var f=e("#newTextLessonForm");f.find(".chapter-input").val(o),l=(l=(l=(l=(l=f.html()).replace(/record/g,s)).replaceAll("attachments-select2","attachments-select2-"+s)).replaceAll("js-content-summernote","js-content-summernote-"+s)).replaceAll("js-hidden-content-summernote","js-hidden-content-summernote-"+s),e(i).prepend(l),e(".attachments-select2-"+s).select2({multiple:!0,width:"100%"}),e(".js-content-summernote-"+s).summernote({tabsize:2,height:400,callbacks:{onChange:function(t,n){e(".js-hidden-content-summernote-"+s).val(t)}}});break;case"assignment":var u=e("#newAssignmentForm");u.find(".chapter-input").val(o),l=(l=u.html()).replace(/record/g,s),e(i).prepend(l);break;case"quiz":var m=e("#newQuizForm");m.find(".chapter-input").val(o),l=(l=m.html()).replace(/record/g,s),e(i).prepend(l)}resetDatePickers(),feather.replace()}),e("body").on("click",".js-change-content-chapter",function(t){t.preventDefault();var a=e(this),r=a.attr("data-item-id"),o=a.attr("data-item-type"),i=a.attr("data-chapter-id"),s=n(),l=e("#changeChapterModalHtml").clone();l.removeClass("d-none");var c=l.prop("innerHTML");l.html('<div id="changeChapterModalHtml'+s+'">'+c+"</div>"),Swal.fire({html:l,showCancelButton:!1,showConfirmButton:!1,customClass:{content:"p-0 text-left"},width:"36rem",onOpen:function(){var t=e("#changeChapterModalHtml"+s);t.find("input.js-item-id").val(r),t.find("input.js-item-type").val(o),t.find(".js-ajax-chapter_id").val(i).change()}})}),e("body").on("click",".save-change-chapter",function(t){t.preventDefault();var n=e(this),a=n.closest(".change-chapter-form");handleWebinarItemForm(a,n)}),e("body").on("click",".js-save-session",function(t){t.preventDefault();var n=e(this),a=n.closest(".session-form");handleWebinarItemForm(a,n)}),e("body").on("click",".js-save-assignment",function(t){t.preventDefault();var n=e(this),a=n.closest(".assignment-form");handleWebinarItemForm(a,n)}),e("body").on("click",".js-save-file",function(t){t.preventDefault();var n=e(this);!function(t,n){serializeObjectByTag(t);var a=t.attr("data-action");n.addClass("loadingbar primary").prop("disabled",!0),t.find("input").removeClass("is-invalid"),t.find("textarea").removeClass("is-invalid");var r=new FormData,o=t.find(".js-s3-file-input");o&&o.prop("files")&&o.prop("files")[0]&&r.append("s3_file",o.prop("files")[0]);var i=t.find("input, textarea, select").serializeArray();e.each(i,function(){r.append(this.name,this.value)}),e.ajax({url:a,type:"POST",data:r,processData:!1,contentType:!1,cache:!1,success:function(e){e&&200===e.code&&(Swal.fire({icon:"success",html:'<h3 class="font-20 text-center text-dark-blue py-25">'+saveSuccessLang+"</h3>",showConfirmButton:!1,width:"25rem"}),setTimeout(function(){window.location.reload()},500))},error:function(e){n.removeClass("loadingbar primary").prop("disabled",!1);var a=e.responseJSON;a&&a.errors&&Object.keys(a.errors).forEach(function(e){var n=a.errors[e],r=t.find(".js-ajax-"+e);r.addClass("is-invalid"),r.parent().find(".invalid-feedback").text(n[0])})}})}(n.closest(".file-form"),n)}),e("body").on("click",".js-save-text_lesson",function(t){t.preventDefault();var n=e(this),a=n.closest(".text_lesson-form");handleWebinarItemForm(a,n)}),e(document).ready(function(){var t=e(".accordion-content-wrapper .js-content-summernote");t.length&&t.summernote({tabsize:2,height:400,callbacks:{onChange:function(t,n){e(".js-hidden-content-summernote").val(t)}}}),setTimeout(function(){var t;(t=e("body #prerequisitesAccordion .prerequisites-select2")).length&&t.select2({minimumInputLength:3,allowClear:!0,ajax:{url:"/panel/webinars/search",dataType:"json",type:"POST",quietMillis:50,data:function(t){return{term:t.term,webinar_id:e(this).data("webinar-id")}},processResults:function(t){return{results:e.map(t,function(e){return{text:e.title,id:e.id}})}}}}),e(".accordion-content-wrapper .attachments-select2").length&&e(".accordion-content-wrapper .attachments-select2").select2({multiple:!0,width:"100%"})},1e3)}),e("body").on("click","#webinarAddPrerequisites",function(t){t.preventDefault();var a=n(),r=e("#newPrerequisiteForm").html();r=(r=r.replaceAll("record",a)).replaceAll("prerequisites-select2","prerequisites-select2-"+a),e("#prerequisitesAccordion").prepend(r),e(".prerequisites-select2-"+a).select2({placeholder:e(this).data("placeholder"),minimumInputLength:3,allowClear:!0,ajax:{url:"/panel/webinars/search",dataType:"json",type:"POST",quietMillis:50,data:function(t){return{term:t.term,webinar_id:e(this).data("webinar-id")}},processResults:function(t){return{results:e.map(t,function(e){return{text:e.title,id:e.id}})}}}}),feather.replace()}),e("body").on("click",".js-save-prerequisite",function(t){t.preventDefault();var n=e(this),a=n.closest(".prerequisite-form");handleWebinarItemForm(a,n)}),e("body").on("click","#webinarAddFAQ",function(t){t.preventDefault();var a=n(),r=e("#newFaqForm").html();r=r.replaceAll("record",a),e("#faqsAccordion").prepend(r),feather.replace()}),e("body").on("click",".js-save-faq",function(t){t.preventDefault();var n=e(this),a=n.closest(".faq-form");handleWebinarItemForm(a,n)}),e("body").on("click","#add_new_learning_materials",function(t){t.preventDefault();var a=n(),r=e("#new_learning_materials_html").html();r=r.replaceAll("record",a),e("#learning_materials_accordion").prepend(r),feather.replace()}),e("body").on("click","#add_new_company_logos",function(t){t.preventDefault();var a=n(),r=e("#new_company_logos_html").html();r=r.replaceAll("record",a),e("#company_logos_accordion").prepend(r),feather.replace()}),e("body").on("click","#add_new_requirements",function(t){t.preventDefault();var a=n(),r=e("#new_requirements_html").html();r=r.replaceAll("record",a),e("#requirements_accordion").prepend(r),feather.replace()}),e("body").on("click",".js-save-extra_description",function(t){t.preventDefault();var n=e(this),a=n.closest(".extra_description-form");handleWebinarItemForm(a,n)}),e("body").on("click","#webinarAddQuiz",function(t){t.preventDefault();var a=n(),r=e("#newQuizForm").html();r=r.replaceAll("record",a),e("#quizzesAccordion").prepend(r),feather.replace()}),e("body").on("click",".js-save-quiz",function(t){t.preventDefault();var n=e(this),a=n.closest(".quiz-form");handleWebinarItemForm(a,n)}),e(document).ready(function(){function t(t){t.length&&t.sortable({group:"no-drop",handle:".move-icon",axis:"y",update:function(n,a){var r=t.sortable("toArray",{attribute:"data-id"});!function(t,n){e.post("/panel/webinars/order-items",{table:t,items:n},function(t){t&&t.title&&t.msg&&e.toast({heading:t.title,text:t.msg,bgColor:primaryColor,textColor:"white",hideAfter:1e4,position:"bottom-right",icon:"success"})})}(n.target.getAttribute("data-order-table"),r.join(","))}})}var n=e(".draggable-lists"),a=e(".draggable-lists2"),r=e(".draggable-lists3"),o=[],i=e(".draggable-content-lists");if(i.length){var s,l=_createForOfIteratorHelper(i);try{for(l.s();!(s=l.n()).done;){var c=s.value;o.push(e(c).attr("data-drag-class"))}}catch(e){l.e(e)}finally{l.f()}}if(o.length){var d,p=_createForOfIteratorHelper(o);try{for(p.s();!(d=p.n()).done;){var f=d.value,u=e("."+f);u.length&&t(u)}}catch(e){p.e(e)}finally{p.f()}}t(n),a.length&&t(a),r.length&&t(r)}),e("body").on("click",".js-s3-file-path-input button",function(){e(this).closest(".js-s3-file-path-input").find("input").trigger("click")}),e("body").on("change",".js-video-demo-source",function(t){t.preventDefault();var n=e(this).val(),a=e(".js-video-demo-path-input .js-video-demo-path-upload"),r=e(".js-video-demo-path-input .js-video-demo-path-links"),o=e(".js-video-demo-path-input input");a.addClass("d-none"),r.addClass("d-none"),"upload"===n?a.removeClass("d-none"):r.removeClass("d-none"),videoDemoPathPlaceHolderBySource&&o.attr("placeholder",videoDemoPathPlaceHolderBySource[n])}),e("body").on("change",".js-file-storage",function(t){t.preventDefault();var n=e(this).val(),r=e(this).closest(".file-form"),o=r.find(".js-ajax-file_type").val();a(r,n,o)}),e("body").on("change",".js-ajax-file_type",function(t){t.preventDefault();var n=e(this).val(),r=e(this).closest(".file-form"),o=r.find(".js-file-storage").val();a(r,o,n)}),e("body").on("change",".js-api-input",function(t){t.preventDefault();var n=e(this).closest(".session-form"),a=this.value;n.find(".js-zoom-not-complete-alert").addClass("d-none"),n.find(".js-agora-chat-and-rec").addClass("d-none"),"big_blue_button"===a?(n.find(".js-local-link").addClass("d-none"),n.find(".js-api-secret").removeClass("d-none"),n.find(".js-moderator-secret").removeClass("d-none")):"zoom"===a?(n.find(".js-local-link").addClass("d-none"),n.find(".js-api-secret").addClass("d-none"),n.find(".js-moderator-secret").addClass("d-none"),hasZoomApiToken&&"true"!==hasZoomApiToken&&n.find(".js-zoom-not-complete-alert").removeClass("d-none")):"agora"===a?(n.find(".js-agora-chat-and-rec").removeClass("d-none"),n.find(".js-api-secret").addClass("d-none"),n.find(".js-local-link").addClass("d-none"),n.find(".js-moderator-secret").addClass("d-none")):(n.find(".js-local-link").removeClass("d-none"),n.find(".js-api-secret").removeClass("d-none"),n.find(".js-moderator-secret").addClass("d-none"))}),e(document).ready(function(){var t=e(".file-form");t&&t.length&&t.each(function(n){if(t[n]){var r=e(t[n]),o=r.find(".js-file-storage").val(),i=r.find(".js-ajax-file_type").val();a(r,o,i)}})}),e("body").on("change",".js-interactive-type",function(){var t=e(this).closest(".file-form").find(".js-interactive-file-name-input");t.addClass("d-none"),"custom"===e(this).val()&&t.removeClass("d-none")}),e("body").on("click",".js-session-has-ended",function(){e.toast({heading:requestFailedLang,text:thisLiveHasEndedLang,bgColor:"#f63c3c",textColor:"white",hideAfter:1e4,position:"bottom-right",icon:"error"})}),e("body").on("change",".js-sequence-content-switch",function(){var t=e(this).closest(".accordion-row").find(".js-sequence-content-inputs");t.addClass("d-none"),this.checked&&t.removeClass("d-none")}),e("body").on("click",".assignment-attachments-add-btn",function(t){var a=e(this).closest(".js-assignment-attachments-items"),r=a.find(".assignment-attachments-main-row").clone();r.removeClass("assignment-attachments-main-row"),r.removeClass("d-none");var o=r.find(".assignment-attachments-remove-btn");o&&o.removeClass("d-none");var i=r.prop("innerHTML");i=(i=(i=i.replaceAll("assignmentTemp",n())).replaceAll("btn-primary","btn-danger")).replaceAll("assignment-attachments-add-btn","assignment-attachments-remove-btn"),r.html(i),a.append(r)}),e("body").on("click",".assignment-attachments-remove-btn",function(t){t.preventDefault(),e(this).closest(".js-ajax-attachments").remove()})}(jQuery);
