function _createForOfIteratorHelper(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}!function(e){"use strict";function t(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",r=0;r<5;r++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}e("body").on("click","#add_multiple_question",function(r){r.preventDefault();var n=e("#multipleQuestionModal").clone(),a="correctAnswerSwitch"+t();n.find("label.js-switch").attr("for",a),n.find("input.js-switch").attr("id",a);var i=t();n.find(".panel-file-manager").attr("data-input",i),n.find(".main-answer-row").removeClass("main-answer-row").addClass("main-answer-box");var o=n.prop("innerHTML");o=(o=o.replaceAll("record",i)).replaceAll("ans_tmp","ans_temp"),n.html(o),Swal.fire({html:n.html(),showCancelButton:!1,showConfirmButton:!1,customClass:{content:"p-0 text-left"},width:"48rem"})}),e("body").on("click",".add-answer-btn",function(r){r.preventDefault();var n=e(".add-answer-container .main-answer-box"),a=n.clone();a.removeClass("main-answer-box"),a.find(".answer-remove").removeClass("d-none");var i="correctAnswerSwitch"+t();a.find("label.js-switch").attr("for",i),a.find("input.js-switch").attr("id",i),a.find('input[type="checkbox"]').prop("checked",!1);var o=a.prop("innerHTML"),s=t();o=(o=o.replaceAll("ans_temp",s)).replace(/\[\d+\]/g,"["+s+"]"),a.html(o),a.find('input[type="checkbox"]').prop("checked",!1),a.find('input[type="text"]').val(""),n.parent().append(a)}),e("body").on("click",".answer-remove",function(t){t.preventDefault(),e(this).closest(".add-answer-card").remove()}),e("body").on("click","#add_descriptive_question",function(r){r.preventDefault();var n=e("#descriptiveQuestionModal").clone(),a=t(),i=n.prop("innerHTML");i=(i=i.replaceAll("record",a)).replaceAll("ans_tmp","ans_temp"),n.html(i),Swal.fire({html:n.html(),showCancelButton:!1,showConfirmButton:!1,customClass:{content:"p-0 text-left"},width:"48rem"})}),e("body").on("change",".js-switch",function(){var t=e(this);t.closest(".js-switch-parent");this.checked&&(e(".js-switch").each(function(){e(this).closest(".js-switch-parent").find('input[type="checkbox"]').prop("checked",!1)}),t.prop("checked",!0))}),e("body").on("click",".save-question",function(t){t.preventDefault();var r=e(this),n=r.closest(".quiz-questions-form"),a=serializeObjectByTag(n),i=n.attr("data-action");r.addClass("loadingbar primary").prop("disabled",!0),n.find("input").removeClass("is-invalid"),n.find("textarea").removeClass("is-invalid"),e.post(i,a,function(e){e&&200===e.code&&(Swal.fire({icon:"success",html:'<h3 class="font-20 text-center text-dark-blue py-25">'+saveSuccessLang+"</h3>",showConfirmButton:!1,width:"25rem"}),setTimeout(function(){window.location.reload()},500))}).fail(function(e){r.removeClass("loadingbar primary").prop("disabled",!1);var t=e.responseJSON;t&&t.errors&&Object.keys(t.errors).forEach(function(e){var r=t.errors[e],a=n.find(".js-ajax-"+e);a.addClass("is-invalid"),a.parent().find(".invalid-feedback").text(r[0])})})}),e("body").on("click",".js-submit-quiz-form",function(t){t.preventDefault();var r=e(this),n=r.closest(".quiz-form"),a=serializeObjectByTag(n),i=n.attr("data-action");r.addClass("loadingbar primary").prop("disabled",!0),n.find("input").removeClass("is-invalid"),n.find("textarea").removeClass("is-invalid"),e.post(i,a,function(e){e&&200===e.code&&(Swal.fire({icon:"success",html:'<h3 class="font-20 text-center text-dark-blue">'+saveSuccessLang+"</h3>",showConfirmButton:!1}),setTimeout(function(){e.redirect_url&&""!==e.redirect_url?window.location.href=e.redirect_url:window.location.reload()},2e3))}).fail(function(e){r.removeClass("loadingbar primary").prop("disabled",!1);var t=e.responseJSON;t&&t.errors&&Object.keys(t.errors).forEach(function(e){var r=t.errors[e],a=n.find(".js-ajax-"+e);a.addClass("is-invalid"),a.parent().find(".invalid-feedback").text(r[0])})})}),e("body").on("click",".edit_question",function(r){r.preventDefault();var n=e(this).attr("data-question-id");loadingSwl(),e.get("/admin/quizzes-questions/"+n+"/edit",function(r){if(r&&r.html){var n='<div id="editQuestion">'+r.html+"</div>";Swal.fire({html:n,showCancelButton:!1,showConfirmButton:!1,customClass:{content:"p-0 text-left"},width:"48rem",onOpen:function(){var r=e("#editQuestion");r.find(".main-answer-row").removeClass("main-answer-row").addClass("main-answer-box");var n=t();r.find(".admin-file-manager").first().attr("data-input",n),r.find(".lfm-input").first().attr("id",n);var a="correctAnswerSwitch"+t();r.find("label.js-switch").first().attr("for",a),r.find("input.js-switch").first().attr("id",a)}})}})}),e("body").on("change",".js-quiz-question-locale",function(t){t.preventDefault();var r=e(this),n=e(this).closest(".quiz-questions-form"),a=r.val(),i=r.attr("data-id");r.addClass("loadingbar gray");var o="/admin/quizzes-questions/"+i+"/getQuestionByLocale?locale="+a;e.get(o,function(t){var a=t.question;if("descriptive"===a.type){var i=["title","correct"];Object.keys(a).forEach(function(t){var r=a[t];-1!==e.inArray(t,i)&&n.find(".js-ajax-"+t).val(r)})}else if(n.find(".js-ajax-title").val(a.title),a.quizzes_questions_answers&&a.quizzes_questions_answers.length){var o,s=_createForOfIteratorHelper(a.quizzes_questions_answers);try{for(s.s();!(o=s.n()).done;){var l=o.value;l&&n.find(".js-ajax-answer-title-"+l.id).val(l.title)}}catch(e){s.e(e)}finally{s.f()}}r.removeClass("loadingbar gray")}).fail(function(e){r.removeClass("loadingbar gray")})})}(jQuery);
